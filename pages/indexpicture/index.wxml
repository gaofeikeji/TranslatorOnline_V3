<!--pages/indexpicture/index.wxml--> 
<navigation-bar
canBack="{{true}}" 
currentLang="{{currentLang}}"
currentTargetLang="{{currentTargetLang}}" 
    color-animation-duration="2000"
    color-animation-timing-func="easeIn"
  />  

  <!-- 当前图片展示容器 -->    
  <scroll-view class="scrollarea" scroll-y type="list">                             
  <view class="container ">  
    <movable-area scale-area="{{true}}"  id="zoomArea" class="zoomArea"
    style=" width:{{selectPicturWidth*3}}px;height:{{selectPicturHeight*3}}px;">
      <movable-view direction="all"        
      scale-min="0.001" x="{{currentSelectX}}" y="{{currentSelectY}}"  
       scale-max="6"  
        style="width:{{selectPicturWidth}}px;height:{{selectPicturHeight}}px;"
       damping="5" inertia="{{false}}" 
       out-of-bounds="{{true}}"  inertia="{{true}}" scale="{{true}}" direction="all" 
       htouchmove="listenstartMove"     >
     <!-- bindscale="linstenerScale"  -->
      <view  class="media-info-box" style="width:{{selectPicturWidth}}px;height:{{selectPicturHeight}}px;"> 
          <!-- 显示结果 -->
      <block wx:if="{{ showResult ==   1 }}">  
          <view     bindtap="toVerticleHorizonTextItem"
              class="media-text-item {{currentSelectItem==(item.top+':'+item.left)?'selected':''}}"
              wx:for="{{ langList }}"  
              wx:key="index" 
              data-rate="{{ item.single_rate }}"  
              style="left:{{item.left}}px;top:{{item.top}}px;"
              >
              <block wx:if="{{ istranslate }}">
                <text class="media-text" >{{item.single_str_utf8}}</text>  
              </block>
              <block wx:else> 
                <text class="media-text" >{{item.translate}}</text>
              </block>
          </view> 
      </block>
      
        <block wx:if="{{ showResult ==   0 }}"> 
            <image class="selected-image" bind:tap="viewImage"
            style="width:{{selectPicturWidth}}px;height:{{selectPicturHeight}}px;" 
            src="{{selectPicturPath||''}}"></image> 
            <!-- bind:tap="viewImage" -->
        </block>

      </view>
    </movable-view>
    </movable-area>
    
    
  </view>    
</scroll-view>
  
<view class="action-scale" hover-class="none" hover-stop-propagation="false">
            
  <image bindtap="upScalepic" class="scaleAction" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAACrSURBVGiB7djRCYMwFEbhP9Y9FCWhm3UAp+keHaYqSBdp0iffEyFysed7NnoPESJKBboxTL33z5I1Z2hKLnZNCpI0DPdQZ5xjiiKsIsIKIqwgwgoirHDdGKb9JK7hs66PWvfeXWMnpPxvoXj7TpLkUnq52M45a7btvRwfL09b8qDee0mSi+18xnC5LvE6EWEFEVYQYcX/RaToFumcU7gqa79rAAAAAAAAgFp+s3AjweJPdf0AAAAASUVORK5CYII=" mode="aspectFit">
        
  </image>
  <image  bindtap="downScalepic" class="scaleAction" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAADCAYAAACAjW/aAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAAsSURBVBiVvcsxDQAgDACwLkHDPE0ylpDAhYbtoH8DhaXnYjcPCOQk4gzfXw/xJgMDWmhKfAAAAABJRU5ErkJggg==" mode="aspectFit" >
    
  </image>
</view>

  <view class="" wx:if="{{notVip == 1}}">
    <custom-ad ad_type="{{3}}"></custom-ad>
  </view>       
   

<!-- 底部操作区域 -->
<view class="tab-bar tabbar tab-bottom">
  <view 
      class="tabbar-item {{ select === index ? 'tabbar-select' : '' }}"
       wx:for="{{ list }}"  
      wx:key="index"
      data-index="{{ index }}"
      data-actype="{{ item.actype }}"
      bindtap="selectFunction">
      <block wx:if="{{ item.type === 0 }}"> 
          <image src="{{ select === index ?  item.selectedIconPath : item.iconPath }}"></image>
          <text>{{ item.actype === 40 ?(showResult ==   1 ?item.selectedText:item.text):(item.text) }}</text>
      </block>
      <block wx:else>
          <view class="publish">
          <image src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAAAXNSR0IArs4c6QAAARZJREFUaEPtWkEOgjAQZKsPUQLoY+QdvsYH+A59jAJBHyItKUkT7AG2SVcwGS5cNqU7OzOUCZQIXWl6LDrSJSlTkDH3V9PchB6VkNTCuzy/jtdW3ebSto9K4nk/a0JyGmhiiho+nTCJGSGBTqBTRK8FnUAn0OkbAWgCmoAmoAk+B3CK5WM1VMJiV2Ox41QicIqLl7uvRfIFuPjOAjdgU5S/b8JOg/ZZVhqiUyAAqyl/1/V5cCerC6M+h5g784ExmipFOlp4Rnr7dGEcLHY1FhuTQuO1cOwIRBaagCYCKTNVDjqBTqATggI+B/DG5mOFoGAWK9BpFiK4Ex8i0ImPlaw7+SmKTSUC98YuFzvFuhTF3qV+EXJd9lwYVIlg9NySAAAAAElFTkSuQmCC"></image>
          </view>
      </block>
  </view>
</view>

<!-- 操作容器 -->
<block wx:if="{{action}}">
  

  <view class="action-container {{action?'':'hidden'}}">
    <!-- 仅在切换逐行查看状态下显示的切换按钮 -->
    <block wx:if="{{actype==1||  actype ==   10||actype ==   11 }}"> 
      <view class="action-box"  >  
            <image src="{{currentVisti ==   0?'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAC6SURBVFiF7ZXNEYIwFAb3y9iHdELsCGwAbUDsSOgEGuF58OdgUEdyYJx5e91J3h7yo21tFyCyjG5stVu4FoANECWOTHSJDUQzShnHN67JGf4IgIluOCsJKPYWJfqhnXGVgfIDQu4GHvD3AdrWZkAn0b9KM0qAOXf3zdhKOQHh04BPPOJy+XYNDwDDSYfEVRZNix+wJ6ufAQ9YPeB2CAOxqCyRZpQSfVFZTGQgki75Ga39HTuO4ziO41wBEqA/B6pNfmoAAAAASUVORK5CYII=':'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAACLSURBVFiF7ZXRDYAgDESfxg3cgR3Y/8Md3IEd/KGJGooJSozx3u+F9iDXMgARmGkjAUvjWQCm3HzNxc7MO72khTvNzQC5uWfA0x5h7FVYBj5jwEIY8ENoehfsBVpS3ro7DlyNod3c2wPxroHXMyADrxuwEHqJtr+gpD82BYn6nNcadfukhBBCCPEfNmJLEcS1kPz4AAAAAElFTkSuQmCC'}}" 
            class="icon-btns" data-actype="10"  bindtap="selectVerticle"></image> 
            
            <image src="{{currentVisti ==   1?'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAC6SURBVFiF7ZXNEYIwFAb3y9iHdELsCGwAbUDsSOgEGuF58OdgUEdyYJx5e91J3h7yo21tFyCyjG5stVu4FoANECWOTHSJDUQzShnHN67JGf4IgIluOCsJKPYWJfqhnXGVgfIDQu4GHvD3AdrWZkAn0b9KM0qAOXf3zdhKOQHh04BPPOJy+XYNDwDDSYfEVRZNix+wJ6ufAQ9YPeB2CAOxqCyRZpQSfVFZTGQgki75Ga39HTuO4ziO41wBEqA/B6pNfmoAAAAASUVORK5CYII=':'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAABtSURBVEiJ7c0xCoNAEIbRt7A3CMYbeITcwSPb2eUuEStJikDExt44XcK8ZlmYj7+gR3XOG8PJBhRcIyEewS79uIIb2v0/Hdw3eOGDMTJYseD55f2yv2tkLP2HgkuwnSNRRRcYnXGPDKaUUkrHNiEgDdPPbaMbAAAAAElFTkSuQmCC'}}"
             class="icon-btns" data-actype="11"  bindtap="selectVerticle"></image>
            <image src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAADeSURBVDiNvZXBFcMgCIa/ttnAHdwhO3TcnHvNDu7gDr1UQ4gEXvPa/+JT9AsCQfiRboE9SY0A5Qo4AbNzvlgfeRgHZiB7XrHdomrDyONnADjSIid3ZYx4aWkXNgnOF8EJkWAN1loYJ6egrv5R91qHQitzzHybW7dLAJMAWOAGk2A3bNOZ0YB70ARULxRfq3l8KHAhHVPpuQuOQLNat+AFtqqwPB5B2/y0EclfOtJ0PPXSlMmrnMc6DNVggPUiuGvUNtuGNLCNVIGXXrT6cQuJB18xkhh5mmBfFVWN/9UbFXQre304PgEAAAAASUVORK5CYII=" 
            class="icon-btns-close" data-actype="0"  bindtap="selectFunction"></image>
      </view>
      
    </block> 
    
    <block wx:if="{{ actype ==   1 }}"> 
  <!-- 逐行对比 -->
    <block wx:if="{{  currentVisti ==   0 }}"> 
      <scroll-view class="scroll-translate" style="height: 256px;" type="list"	scroll-y="true">
        <view class="lang-item {{currentSelectItem==(item.top+':'+item.left)?'selected':''}}"   bindtap="toImageTextItem"
            wx:for="{{langList}}" wx:key="*this"   
            data-left="{{item.left}}"  data-top="{{item.top}}">
            <text class="horizon-text">{{item.single_str_utf8}}</text>
            <text class="horizon-text translate">{{item.translate}}</text>
         </view>
        </scroll-view>
    </block> 
    <block wx:if="{{ currentVisti ==   1 }}">  
      <scroll-view class="scroll-translate" style="height: 256px;" type="list"	scroll-y="true">
            <view class="lang-verticl-item {{currentSelectItem==(item.top+':'+item.left)?'selected':''}}"    data-left="{{item.left}}"  data-top="{{item.top}}"
            wx:for="{{langList}}" wx:key="*this"   data-index="{{item.single_rate}}"   bindtap="toImageTextItem">
            <view  class="verticle-text ">
              <text class="title text-light">原文</text><text class="right-text text-light">{{item.single_str_utf8}}</text>
            </view>
            <view class="verticle-text">
              <text class="title translate">译文</text><text class="right-text">{{item.translate}}</text>
            </view>
            </view>
        </scroll-view>
    </block> 
    </block>
  <!-- 复制内容-->
  <block wx:if="{{ actype ==   20 }}">
      <view class="action-btn-box"> 
          <text class="closeBtn" data-actype="0"  bindtap="selectFunction">X</text>
          <view class="action-btn"  data-actype="51"  bindtap="translateFunction" >仅复制原文</view>
          <view class="action-btn"  data-actype="52"  bindtap="translateFunction" >仅复制翻译结果</view>
          <view class="action-btn"  data-actype="53"  bindtap="translateFunction"  >复制原和结果</view>
      </view>
      </block> 
  <!-- 导出文件 -->
  <block wx:if="{{ actype ==   30 }}">
             
    <view class="action-btn-box"> 
    <view>
    
      <text class="closeBtn" data-actype="0"  bindtap="selectFunction">X</text>
      </view>
      <view class="action-btn" data-actype="71"  bindtap="translateFunction" >导出TXT文件</view>
      <view class="action-btn" data-actype="72"  bindtap="translateFunction" >导出Word文档</view>
      <view class="action-btn" data-actype="73"  bindtap="translateFunction"  >导出Excel文档</view>
      </view>
  </block> 
    <!-- 显示结果 -->
    <!-- <block wx:if="{{ actype ==   40 }}">
             
             <view class="action-item">
               44444444444444
             </view>
             </block>  -->
  </view>      
  
</block>


<vip-member id="pay"></vip-member>

<!-- 客服 -->
<customerService direction="right" DistanceFromBottom="20%"  />
<ToRate id="rate" scene="{{scene}}" canShow="{{show_rate}}" rateScene="{{rateScene}}" alwaysShow="{{true}}" bind:RateShowSuccess="onRateShowSuccess" bind:RateShowFail="onRateShowFail" bind:RateSuccess="onRateSuccess" bind:RateFail="onRateFail" />
